@page "/Issues"
@page "/Zgloszenia"
@inject NavigationManager navigationManager
@inject HttpClient client

@using Domain.Models

<h3>Issues</h3>

@if (issues is null)
{
    <em>Loading issues...</em>
}
else
{
    <ul>
        @foreach (var issue in issues)
        {
            <li><strong>@issue.Title</strong> @issue.Description</li>
        }
    </ul>
}

@code {
    private IEnumerable<Issue> issues;

    protected async override Task OnInitializedAsync()
    {
        navigationManager.LocationChanged += HandleLocationChanged;

        // TODO: get all issues
        issues = await client.GetFromJsonAsync<IEnumerable<Issue>>("api/issues");
    }

    private void HandleLocationChanged(object sender, LocationChangedEventArgs e)
    {
        Console.WriteLine(e.Location);
    }



}
